<div>

  <p class="text-muted" ng-if="$ctrl.filters.comments && $ctrl.step.comment">
    <tc-simple-text content="$ctrl.step.comment"></tc-simple-text>
  </p>

  <p>
    <tc-element-info info="$ctrl.step.info" ng-if="!$ctrl.special"></tc-element-info>
    <i ng-if="$ctrl.special">
      <tc-element-info info="$ctrl.step.info"></tc-element-info>
    </i>
    <tc-status status="$ctrl.step.status"></tc-status>
  </p>

  <table ng-if="$ctrl.step.table" class="table table-bordered" style="width: auto">
    <tbody>
    <tr ng-repeat="row in $ctrl.step.table">
      <td ng-repeat="cell in row"><code>{{ cell }}</code></td>
    </tr>
    </tbody>
  </table>

  <div class="panel panel-danger panel-error-message" ng-if="$ctrl.filters.errorDetails && $ctrl.step.errorMessage">
    <div class="panel-heading">
      <h6 class="panel-title">Message d'erreur</h6>
    </div>
    <div class="panel-body">
      <pre class="error-message text-danger">{{ $ctrl.step.errorMessage }}</pre>
    </div>
  </div>

  <div class="panel panel-default panel-log" ng-if="$ctrl.filters.logs && $ctrl.step.output">
    <div class="panel-heading">
      <h6 class="panel-title">Logs</h6>
    </div>
    <div class="panel-body">
      <pre class="log">{{ $ctrl.step.output }}</pre>
    </div>
  </div>

  <div class="panel panel-default" ng-if="$ctrl.step.attachments.length > 0">
    <div class="panel-heading">
      <h6 class="panel-title">Pièces jointes</h6>
    </div>
    <ul class="list-group">
      <li class="list-group-item" ng-repeat="attachment in $ctrl.step.attachments">
        <a ng-href="{{ $ctrl.buildUrlForAttachment(attachment.id) }}" target="_blank">
          Pièce-jointe #{{ $index + 1 }}
        </a>
      </li>
    </ul>
  </div>

</div>
