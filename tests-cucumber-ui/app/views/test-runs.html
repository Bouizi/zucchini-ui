<div>

  <ol class="breadcrumb">
    <li class="active">Derniers tirs de tests</li>
  </ol>

  <h1>Derniers tirs de tests</h1>

  <hr>

  <div class="btn-toolbar" role="toolbar">
    <div class="btn-group" role="group">

      <button type="button" class="btn btn-default" ng-click="ctrl.openCreateForm()">
        <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
        Créer un tir de tests
      </button>

    </div>
  </div>

  <hr>

  <table class="table table-striped table-bordered">
    <thead>
    <tr>
      <th class="col-md-1">Type</th>
      <th class="col-md-5">Tir de test</th>
      <th class="col-md-1">Total</th>
      <th class="col-md-1">Succès</th>
      <th class="col-md-1">Échecs</th>
      <th class="col-md-1">En attente</th>
      <th class="col-md-1">Non joués</th>
      <th class="col-md-1">Analysés</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="testRun in ctrl.latestTestRuns track by testRun.id">
      <td>
        <span class="label label-default">{{ testRun.type }}</span>
      </td>
      <td>
        <a ng-href="#/test-runs/{{ testRun.id }}">Tir du {{ testRun.date | niceDate }}</a>
      </td>
      <td><span class="badge">{{ testRun.stats.count }}</span></td>
      <td><span class="badge">{{ testRun.stats.statsByStatus['PASSED'] }}</span></td>
      <td><span class="badge">{{ testRun.stats.statsByStatus['FAILED'] }}</span></td>
      <td><span class="badge">{{ testRun.stats.statsByStatus['PENDING'] }}</span></td>
      <td><span class="badge">{{ testRun.stats.statsByStatus['NOT_RUN'] }}</span></td>
      <td><span class="badge">{{ testRun.stats.reviewedCount }}</span></td>
    </tr>
    </tbody>
  </table>

  <!-- Create test run modal window -->
  <script type="text/ng-template" id="createTestRunForm.html">
    <form>
      <div class="modal-header">
        <button type="button" class="close" ng-click="$dismiss()" aria-label="Fermer">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Créer un nouveau tir de tests</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="type">Type</label>
          <input type="text" class="form-control" id="type" ng-model="createCtrl.testRun.type" autofocus>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="$dismiss()">Annuler</button>
        <button type="submit" class="btn btn-primary" ng-click="createCtrl.create()">Créer</button>
      </div>
    </form>
  </script>

</div>
